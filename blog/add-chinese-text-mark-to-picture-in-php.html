<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="中南大学|清华大学软件学院唐磊的博客,主攻软件工程,数据挖掘,这里记录了我的学习，生活和工作"><title>php图片加文字水印(中文乱码解法方案) | tanglei's blog|唐磊的个人博客</title><link rel="stylesheet" type="text/css" href="/css/normalize.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="/css/pure-min.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="/css/grids-responsive-min.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">php图片加文字水印(中文乱码解法方案)</h1><a id="logo" href="/.">tanglei's blog|唐磊的个人博客</a><p class="description">记录我的学习、生活、工作。</p></div><div id="nav-menu"><a href="/." class="current"><i class="icon-home"> 首页</i></a><a href="/archives/"><i class="icon-archive"> 归档</i></a><a href="/blog/about.html"><i class="icon-about"> 关于</i></a><a href="/atom.xml"><i class="icon-rss"> 订阅</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post post-page"><h1 class="post-title">php图片加文字水印(中文乱码解法方案)</h1><div class="post-meta">2011-11-17 | <span class="categories">分类于<a href="/categories/PHP/"> PHP</a><a href="/categories/PHP/实习那些事儿/"> 实习那些事儿</a></span></div><span data-disqus-identifier="blog/add-chinese-text-mark-to-picture-in-php.html" class="disqus-comment-count"></span><div class="post-content"><p>昨天接到一个新需求，给图片加文字。用于感恩节还是圣诞节之类的哦。也就是图片加文字水印。网上查了下，很多相关的内容。英文是很好解决滴，不过中文可搞死我了。</p>
<p>大致就是：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$font = &#39;./simhei.ttf&#39;;//&#27700;&#21360;&#23383;&#20307;&#65292;Windows\Fonts&#26377;&#65292;&#20081;&#30721;&#36319;&#36825;&#20010;&#20063;&#26377;&#20851;&#31995;&#10;$im = imagecreatefrompng(&#34;./1.png&#34;);//&#36733;&#20837;&#22270;&#29255;&#65288;&#31867;&#20284;&#30340;jpeg/gif&#26041;&#27861;&#65289;&#10;$red = imagecolorallocate($im, 255, 0, 0);//&#35774;&#32622;&#39068;&#33394; rgb&#10;imagettftext($im, 12, 0, 320, 84, $red, $font, $name);//&#25171;&#21360;&#27700;&#21360;&#10;imagepng($im,&#39;test2.png&#39;);//&#36755;&#20986;&#22270;&#29255;,&#22914;&#26524;&#35201;&#20445;&#23384;&#21152;&#20010;&#20445;&#23384;&#36335;&#24452;&#21644;&#25991;&#20214;&#21517;&#10;imagedestroy($im);//&#37322;&#25918;&#36164;&#28304;</span><br></pre></td></tr></table></figure>
<p>然后就会发现乱码。</p>
<p>网上再查，类似$text = iconv(&#8220;GB2312&#8221;, &#8220;UTF-8&#8221;, $name);GBK啊等等，我都试过，结果一样，还是乱码。再有的说因为php文件本身的编码不是UTF8啊等等。我特意记事本，另存为<span style="font-family: Arial;">UTF-8</span><span style="font-family: 宋体;">，再</span><span style="font-family: Arial;">try</span><span style="font-family: 宋体;">，仍然乱码。还有的说加什么</span><span style="font-family: Arial;">header( &#8220;Content-Type:text/html; charset=UTF-8 &#8220;);</span><span style="font-family: 宋体;">仍然乱码。</span><span style="font-family: Arial;"><br> </span></p>
<p>还有的说用<span style="font-size: 10pt;"><span style="color: black; font-family: Courier New;">mb_convert_encoding(</span><span style="color: #660000; font-family: Courier New;">$content</span><span style="color: black; font-family: Courier New;">, </span><span style="color: #008200; font-family: Courier New;">&#8220;html-entities&#8221;</span><span style="color: black; font-family: Courier New;">,</span><span style="color: #008200; font-family: Courier New;">&#8220;utf-8&#8221; </span><span style="color: black;"><span style="font-family: Courier New;">);</span><span style="font-family: 宋体;">最后终于</span><span style="font-family: Courier New;">OK</span><span style="font-family: 宋体;">了，不过这个函数还得对应的字体库才行。不然仍然会乱码的。</span><span style="font-family: Courier New;"><br> </span></span></span></p>
<p><span style="color: black; font-family: 宋体; font-size: 10pt;">还得注意有可能会报这个错误</span>imagettftext() [function.imagettftext]: any2euc<span style="color: black;"><span style="font-family: Arial;">jp(): something happen in XXX.php on line XX</span><span style="font-family: 宋体;">。这个就是可能字库里面木有，换个字库。</span></span></p>
<p><span class="Apple-style-span" style="font-family: 宋体;">下面给出我测试的几个典型。</span></p>
<figure class="highlight"><figcaption><span>test1()</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#10;&#9;$content=&#34;&#21776;&#30922;leitang&#34;;&#10;&#9;$content = mb_convert_encoding($content, &#34;html-entities&#34;,&#34;utf-8&#34; );&#10;&#9;$t = setTextWater(&#39;./1.png&#39;,$content,&#34;0,0,255&#34;,7,18);//&#36825;&#20010;&#26041;&#27861;&#35265;&#21518;&#38754;&#10;&#9;echo $t;&#10;&#125;&#10;function test2()&#123;&#10;$name=&#39;&#37057;&#38391;aaaaaa&#39;;&#10;$name = mb_convert_encoding($name, &#34;html-entities&#34;,&#34;utf-8&#34; ); &#10;$font = &#39;./simhei.ttf&#39;;//&#27700;&#21360;&#23383;&#20307;   &#10;$im = imagecreatefrompng(&#34;./1.png&#34;);//&#36733;&#20837;&#22270;&#29255;   &#10;$black = imagecolorallocate($im, 0, 0, 0);//&#35774;&#32622;&#39068;&#33394;   &#10;imagettftext($im, 12, 0, 320, 84, $black, $font, $name);//&#25171;&#21360;&#27700;&#21360;   &#10;imagepng($im,&#39;test2.png&#39;); &#10;imagedestroy($im);//&#28165;&#31354;&#32531;&#23384;  &#10;&#125;&#10;//&#36825;&#20010;&#20854;&#23454;&#26159;&#22270;&#29255;&#27700;&#21360;&#20102;&#10;function test3()&#123;&#10;&#9;$pic=imagecreate(250,30);&#10;&#9;$black=imagecolorallocate($pic,0,0,0);&#10;&#9;$white=imagecolorallocate($pic,255,255,255);&#10;&#9;$font=&#34;./simhei.ttf&#34;;&#10;&#9;$str = &#39;&#20013;&#21326;&#20154;&#27665;&#20849;&#21644;&#22269;&#39;;&#10;&#9;$str = mb_convert_encoding($str, &#34;html-entities&#34;,&#34;utf-8&#34; );//&#32467;&#26524;:&#38;#21738;&#38;#19968;&#38;#38431;&#38;#20248;&#38;#20808;&#38;#24320;&#38;#29699;&#10;&#10;&#9;imagettftext($pic,10,0,10,20,$white,$font,$str);&#10;&#10;&#9;$filename=&#39;./1.png&#39;;&#10;&#9;$im=imagecreatefrompng($filename);&#10;&#9;imagecopymerge($im,$pic,0,0,0,0,250,30,50);&#10;&#9;imagepng($im,&#39;test3.png&#39;);&#10;&#125;</span><br></pre></td></tr></table></figure>
<p><span style="color: black; font-size: 10pt;"><span style="font-family: 宋体;">效果如图：</span><span style="font-family: Courier New;"><br> </span></span></p>
<p><span style="color: black; font-family: Courier New; font-size: 10pt;">Test1<br> </span></p>
<p><img src="/wp-content/uploads/2011/11/111711_1141_Php1.png" alt=""></p>
<p>Test2                                                            Test3</p>
<p><img class="alignleft" title="php中文水印乱码" src="/wp-content/uploads/2011/11/111711_1141_Php2.png" alt="php中文水印乱码" width="172" height="245"></p>
<p><img src="/wp-content/uploads/2011/11/111711_1141_Php3.png" alt=""></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>把每一次试的结果都保存了。</p>
<ul>
<li><span style="color: #660000; background-color: yellow;">$name </span><span style="color: black; background-color: yellow;">= iconv(</span><span style="color: #008200; background-color: yellow;">&#8216;UTF-8&#8217;</span><span style="color: black; background-color: yellow;">, </span><span style="color: #008200; background-color: yellow;">&#8216;GB18030//IGNORE&#8217;</span><span style="color: black; background-color: yellow;">, </span><span style="color: #660000; background-color: yellow;">$name</span><span style="color: black; background-color: yellow;">);</span></li>
</ul>
<p><img src="/wp-content/uploads/2011/11/111711_1141_Php4.png" alt=""></p>
<p>&nbsp;</p>
<ul>
<li><div style="text-align: justify;"><br>  <span style="font-family: Courier New; font-size: 10pt;"><span style="color: #660000; background-color: yellow;">$name </span><span style="color: black; background-color: yellow;">= iconv(</span><span style="color: #008200; background-color: yellow;">&#8216;UTF-8&#8217;</span><span style="color: black; background-color: yellow;">, </span><span style="color: #008200; background-color: yellow;">&#8216;GB2312&#8217;</span><span style="color: black; background-color: yellow;">, </span><span style="color: #660000; background-color: yellow;">$name</span><span style="color: black; background-color: yellow;">);<br> </span></span><br></div>

</li>
</ul>
<p><span style="font-family: Courier New; font-size: 10pt;"><span style="color: #660000; background-color: yellow;">$font</span><span style="color: black; background-color: yellow;">=</span><span style="color: #008200; background-color: yellow;">&#8220;./simhei.ttf&#8221;</span><span style="color: black; background-color: yellow;">;</span></span></p>
<p><img src="/wp-content/uploads/2011/11/111711_1141_Php5.png" alt=""></p>
<ul>
<li><span style="color: #660000; font-family: Courier New;">$name</span><span style="color: black; font-family: Courier New;">=</span><span style="color: #008200;"><span style="font-family: Courier New;">&#8216;</span><span style="font-family: 宋体;">唐磊</span><span style="font-family: Courier New;">leitang&#8217;</span></span><span style="font-family: Courier New;"><span>;</span></span></li>
</ul>
<p><span style="font-family: Courier New; font-size: 10pt;"><span style="color: #660000;">$name </span><span style="color: black;">= mb_convert_encoding(</span><span style="color: #660000;">$name</span><span style="color: black;">, </span><span style="color: #008200;">&#8220;html-entities&#8221;</span><span style="color: black;">,</span><span style="color: #008200;">&#8220;utf-8&#8221; </span><span style="color: black;">);</span><br> </span></p>
<p><span style="font-size: 10pt;"><span style="color: #660000; font-family: Courier New;">$font </span><span style="color: black; font-family: Courier New;">= </span><span style="color: #008200; font-family: Courier New;">&#8216;./arial.ttf&#8217;</span><span style="color: black; font-family: Courier New;">;</span><span style="color: gray;"><span style="font-family: Courier New;">//</span><span style="font-family: 宋体;">水印字体</span><span style="font-family: Courier New;"><br> </span></span></span></p>
<p><img src="/wp-content/uploads/2011/11/111711_1141_Php6.png" alt=""></p>
<p>&nbsp;</p>
<ul>
<li><span style="font-size: 10pt;"><span style="color: #660000; font-family: Courier New;">$name</span><span style="color: black; font-family: Courier New;">=</span><span style="color: #008200;"><span style="font-family: Courier New;">&#8216;</span><span style="font-family: 宋体;">唐磊</span><span style="font-family: Courier New;">leitang&#8217;</span></span><span style="font-family: Courier New;"><span style="color: black;">;</span><br> </span></span></li>
</ul>
<p><span style="font-family: Courier New; font-size: 10pt;"><span style="color: #660000;">$name </span><span style="color: black;">= mb_convert_encoding(</span><span style="color: #660000;">$name</span><span style="color: black;">, </span><span style="color: #008200;">&#8220;html-entities&#8221;</span><span style="color: black;">,</span><span style="color: #008200;">&#8220;utf-8&#8221; </span><span style="color: black;">);</span><br> </span></p>
<p><span style="font-size: 10pt;"><span style="color: #660000; font-family: Courier New;">$font </span><span style="color: black; font-family: Courier New;">= </span><span style="color: #008200; font-family: Courier New;">&#8216;./simhei.ttf&#8217;</span><span style="color: black; font-family: Courier New;">;</span><span style="color: gray;"><span style="font-family: Courier New;">//</span><span style="font-family: 宋体;">水印字体</span><span style="font-family: Courier New;"><br> </span></span></span></p>
<p><img src="/wp-content/uploads/2011/11/111711_1141_Php7.png" alt=""></p>
<ul>
<li><span style="color: #660000; font-family: Courier New;">$name</span><span style="color: black; font-family: Courier New;">=</span><span style="color: #008200;"><span style="font-family: Courier New;">&#8216;</span><span style="font-family: 宋体;">唐磊</span><span style="font-family: Courier New;">leitang&#8217;</span></span><span style="font-family: Courier New;"><span>;</span></span></li>
</ul>
<p><span style="font-family: Courier New; font-size: 10pt;"><span style="color: #660000;">$name </span><span style="color: black;">= mb_convert_encoding(</span><span style="color: #660000;">$name</span><span style="color: black;">, </span><span style="color: #008200;">&#8220;UTF-8&#8221;</span><span style="color: black;">, </span><span style="color: #008200;">&#8220;GBK&#8221;</span><span style="color: black;">);</span><br> </span></p>
<p><span style="font-size: 10pt;"><span style="color: #660000; font-family: Courier New;">$font </span><span style="color: black; font-family: Courier New;">= </span><span style="color: #008200; font-family: Courier New;">&#8216;./simhei.ttf&#8217;</span><span style="color: black; font-family: Courier New;">;</span><span style="color: gray;"><span style="font-family: Courier New;">//</span><span style="font-family: 宋体;">水印字体</span><span style="font-family: Courier New;"><br> </span></span></span></p>
<p><img src="/wp-content/uploads/2011/11/111711_1141_Php8.png" alt=""></p>
<p>&nbsp;</p>
<p>附上详细方法(参考网上滴)：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * 文字水印</span><br><span class="line"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setTextWater</span><span class="params">(<span class="variable">$imgSrc</span>,<span class="variable">$markText</span>,<span class="variable">$TextColor</span>,<span class="variable">$markPos</span>,<span class="variable">$fontSize</span> = <span class="number">30</span>)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">	<span class="variable">$fontType</span>=<span class="string">"./simhei.ttf"</span>;</span><br><span class="line">    <span class="variable">$srcInfo</span> = @getimagesize(<span class="variable">$imgSrc</span>);</span><br><span class="line">    <span class="variable">$srcImg_w</span>    = <span class="variable">$srcInfo</span>[<span class="number">0</span>];</span><br><span class="line">    <span class="variable">$srcImg_h</span>    = <span class="variable">$srcInfo</span>[<span class="number">1</span>];</span><br><span class="line">    <span class="variable">$markText</span> = mb_convert_encoding(<span class="variable">$markText</span>, <span class="string">"html-entities"</span>,<span class="string">"utf-8"</span> );</span><br><span class="line">    <span class="variable">$markedfilename</span>=<span class="string">"tmp/"</span>.time();</span><br><span class="line">    <span class="keyword">switch</span> (<span class="variable">$srcInfo</span>[<span class="number">2</span>]) </span><br><span class="line">    &#123; </span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>: </span><br><span class="line">            <span class="variable">$srcim</span> =imagecreatefromgif(<span class="variable">$imgSrc</span>);</span><br><span class="line">            <span class="variable">$markedfilename</span>.=<span class="string">".gif"</span>;</span><br><span class="line">            <span class="keyword">break</span>; </span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>: </span><br><span class="line">            <span class="variable">$srcim</span> =imagecreatefromjpeg(<span class="variable">$imgSrc</span>); </span><br><span class="line">            <span class="variable">$markedfilename</span>.=<span class="string">".jpg"</span>;</span><br><span class="line">            <span class="keyword">break</span>; </span><br><span class="line">        <span class="keyword">case</span> <span class="number">3</span>: </span><br><span class="line">            <span class="variable">$srcim</span> =imagecreatefrompng(<span class="variable">$imgSrc</span>); </span><br><span class="line">            <span class="variable">$markedfilename</span>.=<span class="string">".png"</span>;</span><br><span class="line">            <span class="keyword">break</span>; </span><br><span class="line">        <span class="keyword">default</span>: </span><br><span class="line">            <span class="keyword">echo</span> <span class="string">"不支持的图片文件类型"</span>; </span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span>(!<span class="keyword">empty</span>(<span class="variable">$markText</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(!file_exists(<span class="variable">$fontType</span>))</span><br><span class="line">            &#123;</span><br><span class="line">               <span class="keyword">echo</span> <span class="string">'字体文件不存在'</span>; </span><br><span class="line">			   <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">'没有水印文字'</span>; </span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">		<span class="comment">//此函数返回一个含有8个单元的数组表示文本外框的四个角，索引值含义：0代表左下角 X 位置，1代表坐下角 Y 位置，</span></span><br><span class="line">		<span class="comment">//2代表右下角 X 位置，3代表右下角 Y 位置，4代表右上角 X 位置，5代表右上角 Y 位置，6代表左上角 X 位置，7代表左上角 Y 位置</span></span><br><span class="line">		<span class="variable">$box</span> = @imagettfbbox(<span class="variable">$fontSize</span>, <span class="number">0</span>, <span class="variable">$fontType</span>,<span class="variable">$markText</span>);</span><br><span class="line">		<span class="comment">//var_dump($box);exit;</span></span><br><span class="line">        <span class="variable">$logow</span> = max(<span class="variable">$box</span>[<span class="number">2</span>], <span class="variable">$box</span>[<span class="number">4</span>]) - min(<span class="variable">$box</span>[<span class="number">0</span>], <span class="variable">$box</span>[<span class="number">6</span>]);</span><br><span class="line">        <span class="variable">$logoh</span> = max(<span class="variable">$box</span>[<span class="number">1</span>], <span class="variable">$box</span>[<span class="number">3</span>]) - min(<span class="variable">$box</span>[<span class="number">5</span>], <span class="variable">$box</span>[<span class="number">7</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">        </span><br><span class="line">     </span><br><span class="line">    <span class="keyword">switch</span>(<span class="variable">$markPos</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">            <span class="variable">$x</span> = <span class="number">5</span>;</span><br><span class="line">            <span class="variable">$y</span> = <span class="variable">$fontSize</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">            <span class="variable">$x</span> = (<span class="variable">$srcImg_w</span> - <span class="variable">$logow</span>) / <span class="number">2</span>;</span><br><span class="line">            <span class="variable">$y</span> = <span class="variable">$fontSize</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">            <span class="variable">$x</span> = <span class="variable">$srcImg_w</span> - <span class="variable">$logow</span> - <span class="number">5</span>;</span><br><span class="line">            <span class="variable">$y</span> = <span class="variable">$fontSize</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">            <span class="variable">$x</span> = <span class="variable">$fontSize</span>;</span><br><span class="line">            <span class="variable">$y</span> = (<span class="variable">$srcImg_h</span> - <span class="variable">$logoh</span>) / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">            <span class="variable">$x</span> = (<span class="variable">$srcImg_w</span> - <span class="variable">$logow</span>) / <span class="number">2</span>;</span><br><span class="line">            <span class="variable">$y</span> = (<span class="variable">$srcImg_h</span> - <span class="variable">$logoh</span>) / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line">            <span class="variable">$x</span> = <span class="variable">$srcImg_w</span> - <span class="variable">$logow</span> - <span class="number">5</span>;</span><br><span class="line">            <span class="variable">$y</span> = (<span class="variable">$srcImg_h</span> - <span class="variable">$logoh</span>) / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">7</span>:</span><br><span class="line">            <span class="variable">$x</span> = <span class="variable">$fontSize</span>;</span><br><span class="line">            <span class="variable">$y</span> = <span class="variable">$srcImg_h</span> - <span class="variable">$logoh</span> - <span class="number">5</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">8</span>:</span><br><span class="line">            <span class="variable">$x</span> = (<span class="variable">$srcImg_w</span> - <span class="variable">$logow</span>) / <span class="number">2</span>;</span><br><span class="line">            <span class="variable">$y</span> = <span class="variable">$srcImg_h</span> - <span class="variable">$logoh</span> - <span class="number">5</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">9</span>:</span><br><span class="line">            <span class="variable">$x</span> = <span class="variable">$srcImg_w</span> - <span class="variable">$logow</span> - <span class="number">5</span>;</span><br><span class="line">            <span class="variable">$y</span> = <span class="variable">$srcImg_h</span> - <span class="variable">$logoh</span> -<span class="number">5</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>: </span><br><span class="line">			<span class="variable">$x</span> = rand ( <span class="number">0</span>, (<span class="variable">$srcImg_w</span> - <span class="variable">$logow</span>) );</span><br><span class="line">			<span class="variable">$y</span> = rand ( <span class="number">0</span>, (<span class="variable">$srcImg_h</span> - <span class="variable">$logoh</span>) );</span><br><span class="line">    &#125;</span><br><span class="line">        </span><br><span class="line">    <span class="variable">$dst_img</span> = @imagecreatetruecolor(<span class="variable">$srcImg_w</span>, <span class="variable">$srcImg_h</span>);</span><br><span class="line">        </span><br><span class="line">    imagecopy ( <span class="variable">$dst_img</span>, <span class="variable">$srcim</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="variable">$srcImg_w</span>, <span class="variable">$srcImg_h</span>);</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="variable">$rgb</span> = explode(<span class="string">','</span>, <span class="variable">$TextColor</span>);</span><br><span class="line">      </span><br><span class="line">        <span class="variable">$color</span> = imagecolorallocate(<span class="variable">$dst_img</span>, intval(<span class="variable">$rgb</span>[<span class="number">0</span>]), intval(<span class="variable">$rgb</span>[<span class="number">1</span>]), intval(<span class="variable">$rgb</span>[<span class="number">2</span>]));</span><br><span class="line">        imagettftext(<span class="variable">$dst_img</span>, <span class="variable">$fontSize</span>, <span class="number">0</span>, <span class="variable">$x</span>, <span class="variable">$y</span>, <span class="variable">$color</span>, <span class="variable">$fontType</span>,<span class="variable">$markText</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="keyword">switch</span> (<span class="variable">$srcInfo</span>[<span class="number">2</span>]) </span><br><span class="line">    &#123; </span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">            imagegif(<span class="variable">$dst_img</span>,<span class="variable">$markedfilename</span>); </span><br><span class="line">            <span class="keyword">break</span>; </span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>: </span><br><span class="line">            imagejpeg(<span class="variable">$dst_img</span>,<span class="variable">$markedfilename</span>); </span><br><span class="line">            <span class="keyword">break</span>; </span><br><span class="line">        <span class="keyword">case</span> <span class="number">3</span>: </span><br><span class="line">            imagepng(<span class="variable">$dst_img</span>,<span class="variable">$markedfilename</span>); </span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>: </span><br><span class="line">            <span class="keyword">echo</span> (<span class="string">"不支持的水印图片文件类型"</span>); </span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>; </span><br><span class="line">    &#125;</span><br><span class="line">        </span><br><span class="line">    imagedestroy(<span class="variable">$dst_img</span>);</span><br><span class="line">    imagedestroy(<span class="variable">$srcim</span>);</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> <span class="variable">$markedfilename</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>顺便把图片水印的也贴出来：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"> * &#22270;&#29255;&#27700;&#21360;&#10; */&#10;function  setImgWater($imgSrc,$markImg,$markPos)&#10;&#123;&#10;    $srcInfo = @getimagesize($imgSrc);&#10;    $srcImg_w    = $srcInfo[0];&#10;    $srcImg_h    = $srcInfo[1];&#10;    $img_water = &#34;./waterpic&#34;;   //&#29983;&#25104;&#30340;&#22270;&#29255;&#25991;&#20214;&#21517; &#10;    switch ($srcInfo[2]) &#10;    &#123; &#10;        case 1: &#10;            $srcim =imagecreatefromgif($imgSrc);&#10;&#9;&#9;&#9;$img_water.=&#34;.gif&#34;;&#10;            break; &#10;        case 2: &#10;            $srcim =imagecreatefromjpeg($imgSrc); &#10;&#9;&#9;&#9;$img_water.=&#34;.jpg&#34;;&#10;            break; &#10;        case 3: &#10;            $srcim =imagecreatefrompng($imgSrc); &#10;&#9;&#9;&#9;$img_water.=&#34;.png&#34;;&#10;            break; &#10;        default: &#10;            echo &#34;&#19981;&#25903;&#25345;&#30340;&#22270;&#29255;&#25991;&#20214;&#31867;&#22411;&#34;; &#10;&#9;&#9;&#9;return false;&#10;    &#125;&#10;    &#123;&#10;        if(!file_exists($markImg) || empty($markImg))&#10;        &#123;&#10;        &#9;echo &#39;&#27700;&#21360;&#25991;&#20214;&#19981;&#23384;&#22312;&#39;;&#10;            return false;&#10;        &#125;&#10;            &#10;        $markImgInfo = @getimagesize($markImg);&#10;        $markImg_w    = $markImgInfo[0];&#10;        $markImg_h    = $markImgInfo[1];&#10;            &#10;        if($srcImg_w &#60; $markImg_w || $srcImg_h &#60; $markImg_h)&#10;        &#123;&#10;        &#9;echo &#39;&#27700;&#21360;&#25991;&#20214;&#27604;&#28304;&#22270;&#29255;&#25991;&#20214;&#37117;&#36824;&#22823;&#39;;&#10;            return false;&#10;        &#125;&#10;            &#10;        switch ($markImgInfo[2]) &#10;        &#123; &#10;            case 1: &#10;                $markim =imagecreatefromgif($markImg); &#10;                break; &#10;            case 2: &#10;                $markim =imagecreatefromjpeg($markImg); &#10;                break; &#10;            case 3: &#10;                $markim =imagecreatefrompng($markImg); &#10;                break; &#10;            default: &#10;                echo (&#34;&#19981;&#25903;&#25345;&#30340;&#27700;&#21360;&#22270;&#29255;&#25991;&#20214;&#31867;&#22411;&#34;); &#10;            &#9;return false; &#10;        &#125;&#10;            &#10;        $logow = $markImg_w;&#10;        $logoh = $markImg_h;&#10;    &#125;&#10;        &#10;     &#10;    switch($markPos)&#10;    &#123;&#10;        case 1:&#10;            $x = 5;&#10;            $y = 5;&#10;            break;&#10;        case 2:&#10;            $x = ($srcImg_w - $logow) / 2;&#10;            $y = 5;&#10;            break;&#10;        case 3:&#10;            $x = $srcImg_w - $logow - 5;&#10;            $y = 5;&#10;            break;&#10;        case 4:&#10;            $x = 5;&#10;            $y = ($srcImg_h - $logoh) / 2;&#10;            break;&#10;        case 5:&#10;            $x = ($srcImg_w - $logow) / 2;&#10;            $y = ($srcImg_h - $logoh) / 2;&#10;            break;&#10;        case 6:&#10;            $x = $srcImg_w - $logow - 5;&#10;            $y = ($srcImg_h - $logoh) / 2;&#10;            break;&#10;        case 7:&#10;            $x = 5;&#10;            $y = $srcImg_h - $logoh - 5;&#10;            break;&#10;        case 8:&#10;            $x = ($srcImg_w - $logow) / 2;&#10;            $y = $srcImg_h - $logoh - 5;&#10;            break;&#10;        case 9:&#10;            $x = $srcImg_w - $logow - 5;&#10;            $y = $srcImg_h - $logoh -5;&#10;            break;&#10;        default: &#10;&#9;&#9;&#9;$x = rand ( 0, ($srcImg_w - $logow) );&#10;&#9;&#9;&#9;$y = rand ( 0, ($srcImg_h - $logoh) );&#10;    &#125;&#10;        &#10;    $dst_img = @imagecreatetruecolor($srcImg_w, $srcImg_h);&#10;        &#10;    imagecopy ( $dst_img, $srcim, 0, 0, 0, 0, $srcImg_w, $srcImg_h);&#10;        &#10;    &#123;&#10;        imagecopy($dst_img, $markim, $x, $y, 0, 0, $logow, $logoh);&#10;        imagedestroy($markim);&#10;    &#125;&#10;        &#10;    switch ($srcInfo[2]) &#10;    &#123; &#10;        case 1:&#10;            imagegif($dst_img, $img_water ); &#10;            break; &#10;        case 2: &#10;            imagejpeg($dst_img, $img_water ); &#10;            break; &#10;        case 3: &#10;            imagepng($dst_img, $img_water ); &#10;            break;&#10;        default: &#10;            echo (&#34;&#19981;&#25903;&#25345;&#30340;&#27700;&#21360;&#22270;&#29255;&#25991;&#20214;&#31867;&#22411;&#34;); &#10;            return false; &#10;    &#125;&#10;        &#10;    imagedestroy($dst_img);&#10;    imagedestroy($srcim);&#10;&#9;&#10;&#9;echo &#39;success,the watermarked picture is &#39;.$img_water.&#34;\n&#34;;&#10;&#9;return true;&#10;&#125;</span><br></pre></td></tr></table></figure>
<p>btw,codecolorer这个插件的那个bug还没解决啊。后台写blog时，只要切换一下html到可视化，代码缩进就木有了……</p>
</div><div class="tags"><a href="/tags/PHP/">PHP</a><a href="/tags/php中文图片水印/">php中文图片水印</a><a href="/tags/php中文水印乱码/">php中文水印乱码</a><a href="/tags/php文字水印乱码/">php文字水印乱码</a></div><div class="post-nav"><a href="/blog/intern-in-tencent-to-be-a-sad-programmer.html" class="pre"><i class="icon-previous">感受到了做程序员的苦逼</i></a><a href="/blog/qq-mobile-secure-manager-feedback.html" class="next">坑爹的QQ手机管家【续】<i class="icon-next"></i></a></div><div id="disqus_thread"><script>var disqus_shortname = 'hexo-tanglei';
var disqus_identifier = 'blog/add-chinese-text-mark-to-picture-in-php.html';
var disqus_title = 'php图片加文字水印(中文乱码解法方案)';
var disqus_url = 'http://www.tanglei.name/blog/add-chinese-text-mark-to-picture-in-php.html';
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//hexo-tanglei.disqus.com/count.js" async></script></div></div></div></div><div class="pure-u-1-4"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search" class="search-form-input"/><input type="hidden" name="sitesearch" value="http://www.tanglei.name"/></form></div><div class="widget"><div class="widget-title">分类</div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/JAVA/">JAVA</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux-amp-Ubuntu/">Linux&amp;Ubuntu</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/MyLife/">MyLife</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/PHP/">PHP</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/SoftwareEngineering/">SoftwareEngineering</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Windows/">Windows</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/android/">android</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/c/">c++</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/coding小工具/">coding小工具</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/wordpress/">wordpress</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/业界动态/">业界动态</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/名人名事/">名人名事</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/实习那些事儿/">实习那些事儿</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/工作那些事儿/">工作那些事儿</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/开开眼界/">开开眼界</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/我不会算法/">我不会算法</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/我做站长/">我做站长</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据库应用/">数据库应用</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据挖掘/">数据挖掘</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/敲敲代码/">敲敲代码</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/清华大学/">清华大学</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/玩玩手机/">玩玩手机</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/移动领域/">移动领域</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/经验技巧/">经验技巧</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/网络文摘/">网络文摘</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/计算机图形学/">计算机图形学</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/设计模式/">设计模式</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/贵州支教行/">贵州支教行</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/软件0804/">软件0804</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/软件体系结构/">软件体系结构</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/软件学院/">软件学院</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/软件工程/">软件工程</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/软件度量及其应用/">软件度量及其应用</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/软件配置管理/">软件配置管理</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/软件项目管理/">软件项目管理</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/软考/">软考</a></li></ul></div><div class="widget"><div class="widget-title">标签</div><div class="tagcloud"><a href="/tags/腾讯实习生报道/" style="font-size: 15px;">腾讯实习生报道</a> <a href="/tags/work/" style="font-size: 15px;">work</a> <a href="/tags/jquery/" style="font-size: 15px;">jquery</a> <a href="/tags/前端/" style="font-size: 15px;">前端</a> <a href="/tags/旅游/" style="font-size: 15px;">旅游</a> <a href="/tags/玩遍中国/" style="font-size: 15px;">玩遍中国</a> <a href="/tags/西北旅游/" style="font-size: 15px;">西北旅游</a> <a href="/tags/latex/" style="font-size: 15px;">latex</a> <a href="/tags/beamer/" style="font-size: 15px;">beamer</a> <a href="/tags/tsinghua/" style="font-size: 15px;">tsinghua</a> <a href="/tags/学位论文答辩/" style="font-size: 15px;">学位论文答辩</a> <a href="/tags/ppt-模版/" style="font-size: 15px;">ppt 模版</a> <a href="/tags/经验技巧/" style="font-size: 15px;">经验技巧</a> <a href="/tags/codecolorer/" style="font-size: 15px;">codecolorer</a> <a href="/tags/highlight/" style="font-size: 15px;">highlight</a> <a href="/tags/代码高亮/" style="font-size: 15px;">代码高亮</a> <a href="/tags/wordpress-plugin/" style="font-size: 15px;">wordpress plugin</a> <a href="/tags/wptouch/" style="font-size: 15px;">wptouch</a> <a href="/tags/latex-suite/" style="font-size: 15px;">latex-suite</a> <a href="/tags/mac-osx/" style="font-size: 15px;">mac osx</a> <a href="/tags/vim/" style="font-size: 15px;">vim</a> <a href="/tags/插件/" style="font-size: 15px;">插件</a> <a href="/tags/玩遍世界/" style="font-size: 15px;">玩遍世界</a> <a href="/tags/越南旅游/" style="font-size: 15px;">越南旅游</a> <a href="/tags/回忆录/" style="font-size: 15px;">回忆录</a> <a href="/tags/年终总结/" style="font-size: 15px;">年终总结</a> <a href="/tags/总结/" style="font-size: 15px;">总结</a> <a href="/tags/android/" style="font-size: 15px;">android</a> <a href="/tags/自动/" style="font-size: 15px;">自动</a> <a href="/tags/飞行模式/" style="font-size: 15px;">飞行模式</a> <a href="/tags/leetcode/" style="font-size: 15px;">leetcode</a> <a href="/tags/算法/" style="font-size: 15px;">算法</a> <a href="/tags/面试/" style="font-size: 15px;">面试</a> <a href="/tags/面试题/" style="font-size: 15px;">面试题</a> <a href="/tags/javascript/" style="font-size: 15px;">javascript</a> <a href="/tags/作弊/" style="font-size: 15px;">作弊</a> <a href="/tags/神经猫/" style="font-size: 15px;">神经猫</a> <a href="/tags/debug/" style="font-size: 15px;">debug</a> <a href="/tags/mac/" style="font-size: 15px;">mac</a> <a href="/tags/xcode/" style="font-size: 15px;">xcode</a> <a href="/tags/微软秋令营/" style="font-size: 15px;">微软秋令营</a> <a href="/tags/换行符/" style="font-size: 15px;">换行符</a> <a href="/tags/缓冲区/" style="font-size: 15px;">缓冲区</a> <a href="/tags/跨平台/" style="font-size: 15px;">跨平台</a> <a href="/tags/effective-c/" style="font-size: 15px;">effective c++</a> <a href="/tags/传参/" style="font-size: 15px;">传参</a> <a href="/tags/性能优化/" style="font-size: 15px;">性能优化</a> <a href="/tags/读书笔记/" style="font-size: 15px;">读书笔记</a> <a href="/tags/ipv6/" style="font-size: 15px;">ipv6</a> <a href="/tags/校园网/" style="font-size: 15px;">校园网</a> <a href="/tags/百度云管家/" style="font-size: 15px;">百度云管家</a> <a href="/tags/百度网盘/" style="font-size: 15px;">百度网盘</a> <a href="/tags/APACHE/" style="font-size: 15px;">APACHE</a> <a href="/tags/config/" style="font-size: 15px;">config</a> <a href="/tags/favicon-ico/" style="font-size: 15px;">favicon.ico</a> <a href="/tags/c/" style="font-size: 15px;">c++</a> <a href="/tags/class/" style="font-size: 15px;">class</a> <a href="/tags/OOP/" style="font-size: 15px;">OOP</a> <a href="/tags/struct/" style="font-size: 15px;">struct</a> <a href="/tags/基础/" style="font-size: 15px;">基础</a> <a href="/tags/whois/" style="font-size: 15px;">whois</a> <a href="/tags/纳网/" style="font-size: 15px;">纳网</a> <a href="/tags/网络营销/" style="font-size: 15px;">网络营销</a> <a href="/tags/隐私/" style="font-size: 15px;">隐私</a> <a href="/tags/骗子/" style="font-size: 15px;">骗子</a> <a href="/tags/怀柔/" style="font-size: 15px;">怀柔</a> <a href="/tags/水长城/" style="font-size: 15px;">水长城</a> <a href="/tags/清明/" style="font-size: 15px;">清明</a> <a href="/tags/游记/" style="font-size: 15px;">游记</a> <a href="/tags/cpp/" style="font-size: 15px;">cpp</a> <a href="/tags/RVO/" style="font-size: 15px;">RVO</a> <a href="/tags/拷贝构造函数/" style="font-size: 15px;">拷贝构造函数</a> <a href="/tags/返回值优化/" style="font-size: 15px;">返回值优化</a> <a href="/tags/bug/" style="font-size: 15px;">bug</a> <a href="/tags/FPU/" style="font-size: 15px;">FPU</a> <a href="/tags/x64/" style="font-size: 15px;">x64</a> <a href="/tags/x86/" style="font-size: 15px;">x86</a> <a href="/tags/汇编/" style="font-size: 15px;">汇编</a> <a href="/tags/浮点乘法/" style="font-size: 15px;">浮点乘法</a> <a href="/tags/浮点数/" style="font-size: 15px;">浮点数</a> <a href="/tags/误差/" style="font-size: 15px;">误差</a> <a href="/tags/3次握手/" style="font-size: 15px;">3次握手</a> <a href="/tags/TCP-IP/" style="font-size: 15px;">TCP/IP</a> <a href="/tags/tcpdump/" style="font-size: 15px;">tcpdump</a> <a href="/tags/windump/" style="font-size: 15px;">windump</a> <a href="/tags/计算机网络/" style="font-size: 15px;">计算机网络</a> <a href="/tags/php图片水印/" style="font-size: 15px;">php图片水印</a> <a href="/tags/QQ空间/" style="font-size: 15px;">QQ空间</a> <a href="/tags/图片拼接/" style="font-size: 15px;">图片拼接</a> <a href="/tags/魔力日志/" style="font-size: 15px;">魔力日志</a> <a href="/tags/Android-4-2/" style="font-size: 15px;">Android 4.2</a> <a href="/tags/AutoSwitcher/" style="font-size: 15px;">AutoSwitcher</a> <a href="/tags/WRITE-SECURE-SETTINGS/" style="font-size: 15px;">WRITE_SECURE_SETTINGS</a> <a href="/tags/没有权限/" style="font-size: 15px;">没有权限</a> <a href="/tags/sqlite/" style="font-size: 15px;">sqlite</a> <a href="/tags/安全/" style="font-size: 15px;">安全</a> <a href="/tags/用户体验/" style="font-size: 15px;">用户体验</a> <a href="/tags/百度/" style="font-size: 15px;">百度</a> <a href="/tags/QT/" style="font-size: 15px;">QT</a> <a href="/tags/windows/" style="font-size: 15px;">windows</a></div></div><div class="widget"><div class="widget-title">最新文章</div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/blog/jquery-ajax-post-to-download-a-file.html">jQuery Ajax请求下载文件资源</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/travel-to-northwest-of-China.html">毕业旅行之大西北游</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/codecolorer-adapted-to-highlight.html">将代码高亮插件codecolorer替换为highlight</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/binding-domain-to-plugin-of-mobile-theme.html">给手机主题插件Wptouch绑定单独的域名</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/share-beamer-with-tsinghua-theme.html">分享一个清华主题的beamer模版</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/install-vim-latex-suite-in-mac-osx.html">Mac下安装使用vim插件latex-suite</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/travel-to-vietnam.html">越南10日游记</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/summary-of-year-2014.html">2014年终总结</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/android-airplanemode-auto-switcher-v2.html">飞行模式助手</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/leetcode-summary.html">leetcode总结</a></li></ul></div><div class="widget"><div class="widget-title">最近评论</div><script type="text/javascript" src="//hexo-tanglei.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div><div class="widget"><div class="widget-title">友情链接</div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div></div><div id="footer">© <a href="/." rel="nofollow">tanglei's blog|唐磊的个人博客.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/jquery.min.js?v=0.0.0"></script><script type="text/javascript" src="/js/totop.js?v=0.0.0"></script><script type="text/javascript" src="/js/fancybox.pack.js?v=0.0.0"></script><script type="text/javascript" src="/js/jquery.fancybox.js?v=0.0.0"></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>