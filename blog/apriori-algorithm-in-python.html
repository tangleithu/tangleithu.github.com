<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="中南大学|清华大学软件学院唐磊的博客,主攻软件工程,数据挖掘,这里记录了我的学习，生活和工作"><title>关联规则-Apriori算法详解(附python版源码) | tanglei's blog|唐磊的个人博客</title><link rel="stylesheet" type="text/css" href="/css/normalize.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="/css/pure-min.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="/css/grids-responsive-min.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">关联规则-Apriori算法详解(附python版源码)</h1><a id="logo" href="/.">tanglei's blog|唐磊的个人博客</a><p class="description">记录我的学习、生活、工作。</p></div><div id="nav-menu"><a href="/." class="current"><i class="icon-home"> 首页</i></a><a href="/archives/"><i class="icon-archive"> 归档</i></a><a href="/blog/about.html"><i class="icon-about"> 关于</i></a><a href="/atom.xml"><i class="icon-rss"> 订阅</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post post-page"><h1 class="post-title">关联规则-Apriori算法详解(附python版源码)</h1><div class="post-meta">2012-03-17 | <span class="categories">分类于<a href="/categories/python/"> python</a><a href="/categories/python/我不会算法/"> 我不会算法</a><a href="/categories/python/我不会算法/数据挖掘/"> 数据挖掘</a></span></div><span data-disqus-identifier="blog/apriori-algorithm-in-python.html" class="disqus-comment-count"></span><div class="post-content"><p>Apriori algorithm是关联规则里一项基本算法。是由Rakesh Agrawal和Ramakrishnan Srikant两位在1994年提出的布尔关联规则的频繁项集挖掘算法(详情：<a href="http://rakesh.agrawal-family.com/papers/vldb94apriori.pdf" target="_blank">Fast Algorithms for Mining Association Rules</a>)。算法的名字是因为算法基于先验知识(prior knowledge).根据前一次找到的频繁项来生成本次的频繁项。关联规则的目的在于在一个数据集中找出项之间的关系，也称之为购物蓝分析 (market basket analysis)。例如，购买佳能的顾客，有70%的可能也会买在一个月之类买HP打印机。这其中最有名的例子就是&#8221;<a href="http://baike.baidu.com/view/1978239.htm" target="_blank">尿布和啤酒</a>&#8220;的故事了。</p>
<p>几个概念：</p>
<p>关联规则A-&gt;B的<strong>支持度</strong>support=P(AB)，指的是事件A和事件B同时发生的概率。<strong>置信度</strong>confidence=P(B|A)=P(AB)/P(A),指的是发生事件A的基础上发生事件B的概率。比如说在规则Computer =&gt; antivirus_software , 其中 support=2%, confidence=60%中，就表示的意思是所有的商品交易中有2%的顾客同时买了电脑和杀毒软件，并且购买电脑的顾客中有60%也购买了杀毒软件。</p>
<p>如果事件A中包含k个元素，那么称这个事件A为<strong>k**</strong>项集，<strong>并且事件A满足最小支持度阈值的事件称为</strong>频繁<strong><strong>k</strong></strong>项集**。</p>
<p>Apriori算法的基本思想：</p>
<p>过程分为两个步骤：第一步通过迭代，检索出事务数据库中的所有频繁项集，即支持度不低于用户设定的阈值的项集；第二步利用频繁项集构造出满足用户最小信任度的规则。具体做法就是：首先找出频繁1-项集，记为L<sub>1</sub>；然后利用L<sub>1</sub>来产生候选项集C<sub>2</sub>，对C<sub>2</sub>中的项进行判定挖掘出L<sub>2</sub>，即频繁2-项集；不断如此循环下去直到无法发现更多的频繁k-项集为止。每挖掘一层L<sub>k</sub>就需要扫描整个数据库一遍。算法利用了一个性质：<strong>Apriori 性质</strong>：任一频繁项集的所有非空子集也必须是频繁的。意思就是说，生成一个k-itemset的候选项时，如果这个候选项有子集不在(k-1)-itemset(已经确定是frequent的)中时，那么这个候选项就不用拿去和支持度判断了，直接删除。具体而言：</p>
<p>1） 连接步</p>
<p>为找出L<sub>k</sub>（所有的频繁k项集的集合），通过将L<sub>k-1</sub>（所有的频繁k-1项集的集合）与自身连接产生候选k项集的集合。候选集合记作C<sub>k</sub>。设l<sub>1</sub>和l<sub>2</sub>是L<sub>k-1</sub>中的成员。记l<sub>i</sub>[j]表示l<sub>i</sub>中的第j项。假设Apriori算法对事务或项集中的项按字典次序排序，即对于（k-1）项集l<sub>i</sub>，l<sub>i</sub>[1]<l<sub>i[2]&lt;……….<l<sub>i[k-1]。将L<sub>k-1</sub>与自身连接，如果(l<sub>1</sub>[1]=l<sub>2</sub>[1])&amp;&amp;( l<sub>1</sub>[2]=l<sub>2</sub>[2])&amp;&amp;……..&amp;&amp; (l<sub>1</sub>[k-2]=l<sub>2</sub>[k-2])&amp;&amp;(l<sub>1</sub>[k-1]<l<sub>2[k-1])，那认为l<sub>1</sub>和l<sub>2</sub>是可连接。连接l<sub>1</sub>和l<sub>2</sub> 产生的结果是{l<sub>1</sub>[1],l<sub>1</sub>[2],……,l<sub>1</sub>[k-1],l<sub>2</sub>[k-1]}。</l<sub></l<sub></l<sub></p>
<p>2） 剪枝步</p>
<p>C<sub>K</sub>是L<sub>K</sub>的超集，也就是说，C<sub>K</sub>的成员可能是也可能不是频繁的。通过扫描所有的事务（交易），确定C<sub>K</sub>中每个候选的计数，判断是否小于最小支持度计数，如果不是，则认为该候选是频繁的。为了压缩C<sub>k</sub>,可以利用Apriori性质：任一频繁项集的所有非空子集也必须是频繁的，反之，如果某个候选的非空子集不是频繁的，那么该候选肯定不是频繁的，从而可以将其从C<sub>K</sub>中删除。</p>
<p>算法伪代码如下：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">//算法：Apriori</span><br><span class="line">//输入：D - 事务数据库；min_sup - 最小支持度计数阈值</span><br><span class="line">//输出：L - D中的频繁项集</span><br><span class="line">//方法：</span><br><span class="line">     L1=find_frequent_1-itemsets(D); // 找出所有频繁1项集</span><br><span class="line">     For(k=2;Lk-1!=null;k++)&#123;</span><br><span class="line">        Ck=apriori_gen(Lk-1); // 产生候选，并剪枝</span><br><span class="line">        For each 事务t in D&#123; // 扫描D进行候选计数</span><br><span class="line">            Ct =subset(Ck,t); // 得到t的子集</span><br><span class="line">            For each 候选c 属于 Ct</span><br><span class="line">                         c.count++;</span><br><span class="line">        &#125;</span><br><span class="line">        Lk=&#123;c属于Ck | c.count&gt;=min_sup&#125;</span><br><span class="line">&#125;</span><br><span class="line">Return L=所有的频繁集；</span><br><span class="line"> </span><br><span class="line">Procedure apriori_gen(Lk-1:frequent(k-1)-itemsets)</span><br><span class="line">      For each项集l1属于Lk-1</span><br><span class="line">              For each项集 l2属于Lk-1</span><br><span class="line">                       If((l1[1]=l2[1])&amp;&amp;( l1[2]=l2[2])&amp;&amp;……..</span><br><span class="line">&amp;&amp; (l1[k-2]=l2[k-2])&amp;&amp;(l1[k-1]&lt;l2[k-1])) then&#123;</span><br><span class="line">                   c=l1连接l2 //连接步：产生候选</span><br><span class="line">                   if has_infrequent_subset(c,Lk-1) then</span><br><span class="line">                       delete c; //剪枝步：删除非频繁候选</span><br><span class="line">                   else add c to Ck;</span><br><span class="line">                  &#125;</span><br><span class="line">          Return Ck;</span><br><span class="line"> </span><br><span class="line">     Procedure has_infrequent_sub(c:candidate k-itemset; Lk-1:frequent(k-1)-itemsets)</span><br><span class="line">        For each(k-1)-subset s of c</span><br><span class="line">            If s不属于Lk-1 then</span><br><span class="line">               Return true;</span><br><span class="line">        Return false;</span><br></pre></td></tr></table></figure>
<p>举个例子,来源于书中(见参考文献1)的例子。</p>
<p><a href="/wp-content/uploads/2012/03/image1.png"><img style="display: inline; margin-left: 0px; margin-right: 0px; border: 0px;" title="apriori算法" src="/wp-content/uploads/2012/03/image_thumb1.png" alt="apriori算法" width="137" height="163" border="0" data-pinit="registered"></a></p>
<p>如图中所示,有9个事务，其算法流程如下：</p>
<p><img src="http://i1123.photobucket.com/albums/l549/tl3shi/apriori.jpg" alt="apriori算法,关联规则,数据挖掘"></p>
<p>以上就有了频繁项集，然后根据得到的频繁项集和给定置信度算关联规则。置信度其实是一个条件概率。关联规则产生就是根据每个生成的频繁项集，产生其所有非空子集，然后根据子集和原来的事务库中循环比较。大于给定重复次数的就是满足条件的。例如针对频繁集{I1，I2，I5}。可以产生哪些关联规则？该频繁集的非空真子集（求子集的具体方法在前面<a href="http://www.tanglei.name/a-python-problem-about-a-plusequal-b-and-a-equal-a-plus-b/" target="_blank">python中a+=b和a=a+b的问题</a>中已经阐述）有{I1，I2}，{I1，I5}，{I2，I5}，{I1 }，{I2}和{I5}，对应置信度如下：</p>
<p align="center"><br>  I1&amp;&amp;I2-&gt;I5 confidence=2/4=50%<br></p>

<p align="center"><br>  I1&amp;&amp;I5-&gt;I2 confidence=2/2=100%<br></p>

<p align="center"><br>  I2&amp;&amp;I5-&gt;I1 confidence=2/2=100%<br></p>

<p align="center"><br>  I1 -&gt;I2&amp;&amp;I5 confidence=2/6=33%<br></p>

<p align="center"><br>  I2 -&gt;I1&amp;&amp;I5 confidence=2/7=29%<br></p>

<p align="center"><br>  I5 -&gt;I1&amp;&amp;I2 confidence=2/2=100%<br></p>

<p>如果min_conf=70%,则强规则有I1&amp;&amp;I5-&gt;I2，I2&amp;&amp;I5-&gt;I1，I5 -&gt;I1&amp;&amp;I2。</p>
<p>&nbsp;</p>
<p>具体而言：因为这几天在学python,所以就用python实现如下。里面有注释，刚开始用python，所以把一些问题也注释在里面了，代码可能不怎么清晰。仅供参考。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding=UTF-8</span></span><br><span class="line"><span class="keyword">import</span> copy</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="string">'''</span><br><span class="line">Created on Mar 10, 2012</span><br><span class="line"></span><br><span class="line">@author: tanglei|www.tanglei.name</span><br><span class="line">'''</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Item</span>:</span></span><br><span class="line">    elements=[]</span><br><span class="line">    supp=<span class="number">0.0</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,elements,supp=<span class="number">0.0</span>)</span>:</span></span><br><span class="line">        self.elements = elements</span><br><span class="line">        self.supp = supp</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        returnstr = <span class="string">'[ '</span></span><br><span class="line">        <span class="keyword">for</span> e <span class="keyword">in</span> self.elements:</span><br><span class="line">            returnstr += e+<span class="string">','</span></span><br><span class="line">        returnstr+=<span class="string">' ]'</span>+<span class="string">' (support :%.3f)\t'</span> %(self.supp)</span><br><span class="line">        <span class="keyword">return</span> returnstr</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getSubset</span><span class="params">(self,k,size)</span>:</span></span><br><span class="line">        subset=[]</span><br><span class="line">        <span class="keyword">if</span> k == <span class="number">1</span>:</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(size):</span><br><span class="line">                subset.append([self.elements[i]])</span><br><span class="line">            <span class="keyword">return</span> subset </span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            i = size - <span class="number">1</span>        </span><br><span class="line">            <span class="keyword">while</span> i &gt;= k-<span class="number">1</span> :</span><br><span class="line">                myset = self.getSubset(k-<span class="number">1</span>,i)</span><br><span class="line">                j = <span class="number">0</span></span><br><span class="line">                <span class="keyword">while</span> j &lt; len(myset):</span><br><span class="line">                    <span class="comment">#Attention a+=b  a=a+b  </span></span><br><span class="line">                    myset[j] +=  [self.elements[i]]   <span class="comment">#Why Elements change here?</span></span><br><span class="line">                    j += <span class="number">1</span></span><br><span class="line">                subset += (myset)</span><br><span class="line">                i -= <span class="number">1</span></span><br><span class="line">            <span class="keyword">return</span> subset</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">lastDiff</span><span class="params">(self,items)</span>:</span></span><br><span class="line">        length = len(self.elements)</span><br><span class="line">        <span class="keyword">if</span> length != len(items.elements):<span class="comment">#length should be the same</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">False</span></span><br><span class="line">        <span class="keyword">if</span> self.elements == items:<span class="comment">#if all the same,return false</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">False</span></span><br><span class="line">        <span class="keyword">return</span> self.elements[<span class="number">0</span>:length-<span class="number">1</span>] == items.elements[<span class="number">0</span>:length-<span class="number">1</span>]</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">setSupport</span><span class="params">(self,supp)</span>:</span></span><br><span class="line">        self.supp = supp</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">join</span><span class="params">(self,items)</span>:</span></span><br><span class="line">        temp = copy.copy(self.elements)</span><br><span class="line">        temp.insert(len(self.elements), items.elements[len(items.elements) - <span class="number">1</span>])</span><br><span class="line">        it = Item(temp,<span class="number">0.0</span>)</span><br><span class="line">        <span class="keyword">return</span> it</span><br><span class="line"><span class="comment">#        self.elements.insert(len(self.elements), items.elements[len(items.elements) - 1])#Wrong,if so ,self.elements will change</span></span><br><span class="line"><span class="comment">#        it = Item(self.elements,0.0)</span></span><br><span class="line"><span class="comment">#        print(self.elements)</span></span><br><span class="line"><span class="comment">#        return it</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">#        the following is Wrong ,Because the Constructor Item(),First par is None</span></span><br><span class="line"><span class="comment">#        return copy.deepcopy(Item(\</span></span><br><span class="line"><span class="comment">#                                  self.elements.insert(\</span></span><br><span class="line"><span class="comment">#                                                       len(self.elements), items.elements[len(items.elements) - 1]\</span></span><br><span class="line"><span class="comment">#                                                       )\</span></span><br><span class="line"><span class="comment">#                                  ,0.0)\</span></span><br><span class="line"><span class="comment">#                             )</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span>:</span></span><br><span class="line">    <span class="string">'''candidate '''</span></span><br><span class="line">    elements=[]</span><br><span class="line">    k = <span class="number">0</span> <span class="comment">#order</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,elements,k)</span>:</span></span><br><span class="line">        self.elements = elements</span><br><span class="line">        self.k = k</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">isEmpty</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> len(self.elements) == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">True</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">False</span></span><br><span class="line">    <span class="comment">#get the same order of itemsets whose support is at lease the threshold</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getL</span><span class="params">(self,threshold)</span>:</span></span><br><span class="line">        items=[]</span><br><span class="line">        <span class="keyword">for</span> item <span class="keyword">in</span> self.elements:</span><br><span class="line">            <span class="keyword">if</span> item.supp &gt;= threshold:</span><br><span class="line">                items.append(copy.copy(item))</span><br><span class="line">        <span class="keyword">if</span> len(items) == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> L([],self.k)</span><br><span class="line">        <span class="keyword">return</span> L(copy.deepcopy(items),self.k)   </span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        returnstr = str(self.k)+<span class="string">'-itemset:'</span>+str(len(self.elements))+<span class="string">' \r\n&#123; '</span></span><br><span class="line">        <span class="keyword">for</span> e <span class="keyword">in</span> self.elements:</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">True</span> == isinstance(e,Item):</span><br><span class="line">                returnstr += e.__str__()</span><br><span class="line">        returnstr +=<span class="string">' &#125;'</span></span><br><span class="line">        <span class="keyword">return</span> returnstr</span><br><span class="line">    </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">L</span>:</span></span><br><span class="line">    <span class="string">'''store all the  1-itemsets,2-itemsets,...k-itemsets'''</span></span><br><span class="line">    items=[] <span class="comment">#all the item in order K</span></span><br><span class="line">    k=<span class="number">0</span>  </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,items,k)</span>:</span></span><br><span class="line">        self.items = items</span><br><span class="line">        self.k = k</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">has_inFrequentItemsets</span><span class="params">(self,item)</span>:</span></span><br><span class="line"><span class="comment">#        return False</span></span><br><span class="line"><span class="comment">#        #先不优化</span></span><br><span class="line">        subs = item.getSubset(self.k, len(item.elements))</span><br><span class="line">        <span class="keyword">for</span> each <span class="keyword">in</span> subs:</span><br><span class="line">            flag=<span class="keyword">False</span></span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> self.items:</span><br><span class="line">                <span class="keyword">if</span> i.elements==each:</span><br><span class="line">                    flag=<span class="keyword">True</span></span><br><span class="line">                    <span class="keyword">break</span> </span><br><span class="line">            <span class="keyword">if</span> flag==<span class="keyword">False</span>:</span><br><span class="line"><span class="comment">#                print("remove");print(item)</span></span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">True</span>  </span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">False</span> <span class="comment">#there is at least one subset in the freq-items</span></span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">aprioriGen</span><span class="params">(self)</span>:</span></span><br><span class="line">        length=len(self.items)</span><br><span class="line">        result=[]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(length):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(i+<span class="number">1</span>,length):</span><br><span class="line">                <span class="keyword">if</span> self.items[i].lastDiff(self.items[j]):</span><br><span class="line">                    item = self.items[i].join(self.items[j])</span><br><span class="line">                    <span class="keyword">if</span> <span class="keyword">False</span> == self.has_inFrequentItemsets(item):<span class="comment">#用Apriori性质：任一频繁项集的所有非空子集也必须是频繁的，反之，如果某个候选的非空子集不是频繁的，那么该候选肯定不是频繁的，从而可以将其从CK中删除。</span></span><br><span class="line">                        result.append(item)</span><br><span class="line">        <span class="keyword">if</span>(len(result) == <span class="number">0</span>):</span><br><span class="line">            <span class="keyword">return</span> C([],self.k+<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span> C(result,self.k+<span class="number">1</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        returnstr=<span class="string">"\r\n"</span>+str(self.k) + <span class="string">'-itemsets :'</span>+str(len(self.items))+<span class="string">"\r\n&#123;"</span></span><br><span class="line">        <span class="keyword">for</span> item <span class="keyword">in</span> self.items:</span><br><span class="line">            returnstr += item.__str__()</span><br><span class="line">        returnstr += <span class="string">'&#125;'</span></span><br><span class="line">        <span class="keyword">return</span> returnstr</span><br><span class="line">        </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LS</span>:</span></span><br><span class="line">    <span class="string">'''store from 1-itemset to k-itemset'''</span></span><br><span class="line">    values=&#123;&#125;<span class="comment">#L1,L2,Lk</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self,k)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.values[k]</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">size</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> len(self.values)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">put</span><span class="params">(self,l,k)</span>:</span></span><br><span class="line">        self.values[k]=l</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">isEmpty</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.size()==<span class="number">0</span>    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        returnstr = <span class="string">'-----result--------\r\n'</span></span><br><span class="line">        <span class="keyword">for</span> l <span class="keyword">in</span> self.values:</span><br><span class="line">            returnstr += self.values[l].__str__()</span><br><span class="line">        <span class="keyword">return</span> returnstr</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Rule</span>:</span></span><br><span class="line">    confidence=<span class="number">.0</span></span><br><span class="line">    str_rule=<span class="string">''</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,confidence,str_rule)</span>:</span></span><br><span class="line">        self.confidence = confidence</span><br><span class="line">        self.str_rule = str_rule</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'Rule:'</span> + self.str_rule + <span class="string">'  confidence:'</span> + str(self.confidence)</span><br><span class="line">      </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Apriori</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,min_supp=<span class="number">0.07</span>,datafile=<span class="string">'apriori.test.data'</span>)</span>:</span></span><br><span class="line">        inputfile = open(datafile,<span class="string">"r"</span>)</span><br><span class="line">        self.data=[]</span><br><span class="line">        self.size=<span class="number">0</span></span><br><span class="line">        self.min_supp = min_supp</span><br><span class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> inputfile.readlines():</span><br><span class="line">            linearray = re.compile(<span class="string">"[\d]+"</span>).findall(line)</span><br><span class="line">            self.data.append(linearray)</span><br><span class="line">        </span><br><span class="line">        self.size=len(self.data)</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span>  <span class="title">findFrequent1Itemsets</span><span class="params">(self)</span>:</span></span><br><span class="line">        totalItemsets=[]</span><br><span class="line">        <span class="keyword">for</span> temp <span class="keyword">in</span> self.data:</span><br><span class="line">            totalItemsets.extend(temp)</span><br><span class="line">        items = []<span class="comment">#store the 1-itemset s</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span> len(totalItemsets)&gt;<span class="number">0</span>:</span><br><span class="line">            item=totalItemsets[<span class="number">0</span>]</span><br><span class="line">            count=<span class="number">0</span> </span><br><span class="line">            j=<span class="number">0</span></span><br><span class="line">            <span class="keyword">while</span> j&lt;len(totalItemsets):</span><br><span class="line">                <span class="keyword">if</span> (item == totalItemsets[j]) :</span><br><span class="line">                    count += <span class="number">1</span> </span><br><span class="line">                    totalItemsets.remove(item) <span class="comment">#remove the first occurence</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    j += <span class="number">1</span></span><br><span class="line">            t_supp = count/self.size</span><br><span class="line"><span class="comment">#            print(t_supp)</span></span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> t_supp &gt;= self.min_supp:</span><br><span class="line">                items.append(Item([item],t_supp))</span><br><span class="line">            </span><br><span class="line">        temp = L(copy.deepcopy(items),<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span>   temp</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">ralationRules</span><span class="params">(self,maxSequence,min_confidence)</span>:</span></span><br><span class="line">        ruls=[]</span><br><span class="line">        <span class="keyword">for</span> each <span class="keyword">in</span> maxSequence:</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(len(each.elements)-<span class="number">1</span>):<span class="comment">#real subsets </span></span><br><span class="line">                subsets = each.getSubset(i+<span class="number">1</span>,len(each.elements))<span class="comment">#get the subsets of the i+1 events</span></span><br><span class="line">                <span class="keyword">for</span> subset <span class="keyword">in</span> subsets:</span><br><span class="line">                    count=<span class="number">0</span></span><br><span class="line">                    <span class="keyword">for</span> tran_item <span class="keyword">in</span> self.data:</span><br><span class="line">                        flag = <span class="keyword">False</span> <span class="comment">#标记subset中的每个元素都在源中出现</span></span><br><span class="line">                        <span class="keyword">for</span> ele <span class="keyword">in</span> subset:</span><br><span class="line">                            <span class="keyword">if</span> ele <span class="keyword">not</span> <span class="keyword">in</span> tran_item:</span><br><span class="line">                                flag=<span class="keyword">True</span></span><br><span class="line">                                <span class="keyword">break</span></span><br><span class="line">                        <span class="keyword">if</span> flag == <span class="keyword">False</span>: <span class="comment">#subset出现一次，计数</span></span><br><span class="line">                            count += <span class="number">1</span>  </span><br><span class="line">                    confidence = (each.supp*self.size)/count         </span><br><span class="line">                    <span class="keyword">if</span>  confidence &gt;= min_confidence: <span class="comment">#confidence/the number of the frequent pattern </span></span><br><span class="line">                        str_rule = str(set(subset)) + <span class="string">'--&gt;'</span> + str(set(each.elements)-set(subset))</span><br><span class="line">                        rule =Rule(confidence,str_rule)           </span><br><span class="line">                        ruls.append(rule)</span><br><span class="line">        <span class="keyword">return</span> ruls</span><br><span class="line">          </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">do</span><span class="params">(self)</span>:</span>      </span><br><span class="line">        ls = LS()</span><br><span class="line">        oneitemset = self.findFrequent1Itemsets()</span><br><span class="line">        ls.put(oneitemset, <span class="number">1</span>)</span><br><span class="line">        k = <span class="number">2</span></span><br><span class="line">        <span class="keyword">while</span> <span class="keyword">False</span> == ls.isEmpty():</span><br><span class="line">            cand = ls.get(k - <span class="number">1</span>).aprioriGen()</span><br><span class="line">            <span class="keyword">if</span> cand.isEmpty():</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">for</span> each <span class="keyword">in</span> cand.elements:</span><br><span class="line">                count = <span class="number">0</span></span><br><span class="line">                <span class="keyword">for</span> each_src <span class="keyword">in</span> self.data:</span><br><span class="line">        <span class="comment">#            count = each_src.count(each.elements)#only count the single element,can not be used to count if containing more than 2 elements</span></span><br><span class="line">        <span class="comment">#            need a function like Collection.containAll(Collection) in Java</span></span><br><span class="line">                    <span class="keyword">if</span> len(each_src)&lt;len(each.elements):</span><br><span class="line">                        <span class="keyword">pass</span></span><br><span class="line">                    <span class="keyword">else</span>:</span><br><span class="line">        <span class="comment">#不是必须连续 相等才满足条件，只要元素都在里面即可</span></span><br><span class="line">        <span class="comment">#                for i in range(len(each_src)):</span></span><br><span class="line">        <span class="comment">#                    if each.elements == each_src[i:len(each.elements)]:</span></span><br><span class="line">        <span class="comment">#                         break #no need continue ,We have supposed the elements be sequential</span></span><br><span class="line">                        flag = <span class="keyword">True</span></span><br><span class="line">                        <span class="keyword">for</span> just_one_e <span class="keyword">in</span> each.elements:</span><br><span class="line">                                flag = just_one_e <span class="keyword">in</span> each_src</span><br><span class="line">                                <span class="keyword">if</span> flag == <span class="keyword">False</span>: <span class="comment">#只要有一个不在，即退出</span></span><br><span class="line">                                    <span class="keyword">break</span></span><br><span class="line">                        <span class="keyword">if</span> flag == <span class="keyword">True</span>:   <span class="comment">#当前候选事件都在的话，计数     </span></span><br><span class="line">                            count += <span class="number">1</span></span><br><span class="line">                           </span><br><span class="line">                supp = count/self.size</span><br><span class="line">                each.setSupport(supp)</span><br><span class="line">            ls.put(cand.getL(a.min_supp), k)</span><br><span class="line">            k += <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> ls</span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">starttime = time.time() </span><br><span class="line">a = Apriori(<span class="number">0.2</span>,<span class="string">'apriori_blog.txt'</span>)</span><br><span class="line">ls = a.do() </span><br><span class="line">print(ls) </span><br><span class="line">endtime =  time.time() </span><br><span class="line">print(<span class="string">"It takes %d milliseconds to find the above  patterns"</span> %((endtime-starttime) * <span class="number">1000</span>))    </span><br><span class="line">print()</span><br><span class="line">print(ls.get(ls.size()))</span><br><span class="line">rules = a.ralationRules(ls.get(ls.size()).items,<span class="number">0.5</span>)</span><br><span class="line"><span class="keyword">for</span> rule <span class="keyword">in</span> rules:</span><br><span class="line">    print(rule)</span><br></pre></td></tr></table></figure>
<p>运行结果如下：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">-----result--------</span><br><span class="line"></span><br><span class="line">1-itemsets :5</span><br><span class="line">&#123;[ 1, ] (support :0.667)	[ 2, ] (support :0.778)	[ 5, ] (support :0.222)	[ 4, ] (support :0.222)	[ 3, ] (support :0.667)	&#125;</span><br><span class="line">2-itemsets :6</span><br><span class="line">&#123;[ 1,2, ] (support :0.444)	[ 1,5, ] (support :0.222)	[ 1,3, ] (support :0.444)	[ 2,5, ] (support :0.222)	[ 2,4, ] (support :0.222)	[ 2,3, ] (support :0.444)	&#125;</span><br><span class="line">3-itemsets :2</span><br><span class="line">&#123;[ 1,2,5, ] (support :0.222)	[ 1,2,3, ] (support :0.222)	&#125;</span><br><span class="line">It takes 0 milliseconds to find the above  patterns</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">3-itemsets :2</span><br><span class="line">&#123;[ 1,2,5, ] (support :0.222)	[ 1,2,3, ] (support :0.222)	&#125;</span><br><span class="line">Rule:&#123;'5'&#125;--&gt;&#123;'1', '2'&#125;  confidence:1.0</span><br><span class="line">Rule:&#123;'1', '5'&#125;--&gt;&#123;'2'&#125;  confidence:1.0</span><br><span class="line">Rule:&#123;'2', '5'&#125;--&gt;&#123;'1'&#125;  confidence:1.0</span><br><span class="line">Rule:&#123;'1', '2'&#125;--&gt;&#123;'5'&#125;  confidence:0.5</span><br><span class="line">Rule:&#123;'1', '3'&#125;--&gt;&#123;'2'&#125;  confidence:0.5</span><br><span class="line">Rule:&#123;'3', '2'&#125;--&gt;&#123;'1'&#125;  confidence:0.5</span><br><span class="line">Rule:&#123;'1', '2'&#125;--&gt;&#123;'3'&#125;  confidence:0.5</span><br></pre></td></tr></table></figure>
<p><strong>有网友指出，本页代码在其python环境运行结果不正确，因其环境用的是python2.x，而本人用的环境是python3.x，在python3.x中，两个整数相除是得到小数的，而python2.x里是整数，因此导致支持度计算不正确，只需要改正本页代码中的196行和256行将分子转换成浮点即可（例如分别改为t_supp = count*1.0/self.size，supp = count*1.0/self.size）。本人初学python，一些细节不清楚，望理解。感谢网友指出。</strong></p>
<p>参考文献：</p>
<p>Jiawei Han and Micheline Kamber.Data Mining: Concepts and Techniques[M]. San Francisco: Morgan Kaufmann Publishers.2006：234-240</p>
<p><a href="http://blog.sina.com.cn/s/blog_4882f26d0100spl1.html" target="_blank" rel="external">http://blog.sina.com.cn/s/blog_4882f26d0100spl1.html</a></p>
</div><div class="tags"><a href="/tags/apriori性质/">apriori性质</a><a href="/tags/association-rule/">association rule</a><a href="/tags/datamining/">datamining</a><a href="/tags/python/">python</a><a href="/tags/关联规则/">关联规则</a><a href="/tags/数据挖掘/">数据挖掘</a></div><div class="post-nav"><a href="/blog/books-of-design-pattern-recommendation.html" class="pre"><i class="icon-previous">设计模式书籍推荐</i></a><a href="/blog/undergraduate-history-of-book-in-lab.html" class="next">我的本科借阅史<i class="icon-next"></i></a></div><div id="disqus_thread"><script>var disqus_shortname = 'hexo-tanglei';
var disqus_identifier = 'blog/apriori-algorithm-in-python.html';
var disqus_title = '关联规则-Apriori算法详解(附python版源码)';
var disqus_url = 'http://www.tanglei.name/blog/apriori-algorithm-in-python.html';
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//hexo-tanglei.disqus.com/count.js" async></script></div></div></div></div><div class="pure-u-1-4"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search" class="search-form-input"/><input type="hidden" name="sitesearch" value="http://www.tanglei.name"/></form></div><div class="widget"><div class="widget-title">分类</div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/JAVA/">JAVA</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux-amp-Ubuntu/">Linux&amp;Ubuntu</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/MyLife/">MyLife</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/PHP/">PHP</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/SoftwareEngineering/">SoftwareEngineering</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Windows/">Windows</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/android/">android</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/c/">c++</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/coding小工具/">coding小工具</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/wordpress/">wordpress</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/业界动态/">业界动态</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/名人名事/">名人名事</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/实习那些事儿/">实习那些事儿</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/工作那些事儿/">工作那些事儿</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/开开眼界/">开开眼界</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/我不会算法/">我不会算法</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/我做站长/">我做站长</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据库应用/">数据库应用</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据挖掘/">数据挖掘</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/敲敲代码/">敲敲代码</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/清华大学/">清华大学</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/玩玩手机/">玩玩手机</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/移动领域/">移动领域</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/经验技巧/">经验技巧</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/网络文摘/">网络文摘</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/计算机图形学/">计算机图形学</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/设计模式/">设计模式</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/贵州支教行/">贵州支教行</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/软件0804/">软件0804</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/软件体系结构/">软件体系结构</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/软件学院/">软件学院</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/软件工程/">软件工程</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/软件度量及其应用/">软件度量及其应用</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/软件配置管理/">软件配置管理</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/软件项目管理/">软件项目管理</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/软考/">软考</a></li></ul></div><div class="widget"><div class="widget-title">标签</div><div class="tagcloud"><a href="/tags/XAMPP/" style="font-size: 15px;">XAMPP</a> <a href="/tags/中南大学/" style="font-size: 15px;">中南大学</a> <a href="/tags/贵州支教/" style="font-size: 15px;">贵州支教</a> <a href="/tags/铜厂小学/" style="font-size: 15px;">铜厂小学</a> <a href="/tags/龙场镇/" style="font-size: 15px;">龙场镇</a> <a href="/tags/work/" style="font-size: 15px;">work</a> <a href="/tags/scala/" style="font-size: 15px;">scala</a> <a href="/tags/jquery/" style="font-size: 15px;">jquery</a> <a href="/tags/前端/" style="font-size: 15px;">前端</a> <a href="/tags/旅游/" style="font-size: 15px;">旅游</a> <a href="/tags/玩遍中国/" style="font-size: 15px;">玩遍中国</a> <a href="/tags/西北旅游/" style="font-size: 15px;">西北旅游</a> <a href="/tags/latex/" style="font-size: 15px;">latex</a> <a href="/tags/beamer/" style="font-size: 15px;">beamer</a> <a href="/tags/tsinghua/" style="font-size: 15px;">tsinghua</a> <a href="/tags/学位论文答辩/" style="font-size: 15px;">学位论文答辩</a> <a href="/tags/ppt-模版/" style="font-size: 15px;">ppt 模版</a> <a href="/tags/经验技巧/" style="font-size: 15px;">经验技巧</a> <a href="/tags/codecolorer/" style="font-size: 15px;">codecolorer</a> <a href="/tags/highlight/" style="font-size: 15px;">highlight</a> <a href="/tags/代码高亮/" style="font-size: 15px;">代码高亮</a> <a href="/tags/wordpress-plugin/" style="font-size: 15px;">wordpress plugin</a> <a href="/tags/wptouch/" style="font-size: 15px;">wptouch</a> <a href="/tags/latex-suite/" style="font-size: 15px;">latex-suite</a> <a href="/tags/mac-osx/" style="font-size: 15px;">mac osx</a> <a href="/tags/vim/" style="font-size: 15px;">vim</a> <a href="/tags/插件/" style="font-size: 15px;">插件</a> <a href="/tags/玩遍世界/" style="font-size: 15px;">玩遍世界</a> <a href="/tags/越南旅游/" style="font-size: 15px;">越南旅游</a> <a href="/tags/回忆录/" style="font-size: 15px;">回忆录</a> <a href="/tags/年终总结/" style="font-size: 15px;">年终总结</a> <a href="/tags/总结/" style="font-size: 15px;">总结</a> <a href="/tags/android/" style="font-size: 15px;">android</a> <a href="/tags/自动/" style="font-size: 15px;">自动</a> <a href="/tags/飞行模式/" style="font-size: 15px;">飞行模式</a> <a href="/tags/leetcode/" style="font-size: 15px;">leetcode</a> <a href="/tags/算法/" style="font-size: 15px;">算法</a> <a href="/tags/面试/" style="font-size: 15px;">面试</a> <a href="/tags/面试题/" style="font-size: 15px;">面试题</a> <a href="/tags/javascript/" style="font-size: 15px;">javascript</a> <a href="/tags/作弊/" style="font-size: 15px;">作弊</a> <a href="/tags/神经猫/" style="font-size: 15px;">神经猫</a> <a href="/tags/debug/" style="font-size: 15px;">debug</a> <a href="/tags/mac/" style="font-size: 15px;">mac</a> <a href="/tags/xcode/" style="font-size: 15px;">xcode</a> <a href="/tags/微软秋令营/" style="font-size: 15px;">微软秋令营</a> <a href="/tags/换行符/" style="font-size: 15px;">换行符</a> <a href="/tags/缓冲区/" style="font-size: 15px;">缓冲区</a> <a href="/tags/跨平台/" style="font-size: 15px;">跨平台</a> <a href="/tags/effective-c/" style="font-size: 15px;">effective c++</a> <a href="/tags/传参/" style="font-size: 15px;">传参</a> <a href="/tags/性能优化/" style="font-size: 15px;">性能优化</a> <a href="/tags/读书笔记/" style="font-size: 15px;">读书笔记</a> <a href="/tags/ipv6/" style="font-size: 15px;">ipv6</a> <a href="/tags/校园网/" style="font-size: 15px;">校园网</a> <a href="/tags/百度云管家/" style="font-size: 15px;">百度云管家</a> <a href="/tags/百度网盘/" style="font-size: 15px;">百度网盘</a> <a href="/tags/APACHE/" style="font-size: 15px;">APACHE</a> <a href="/tags/config/" style="font-size: 15px;">config</a> <a href="/tags/favicon-ico/" style="font-size: 15px;">favicon.ico</a> <a href="/tags/c/" style="font-size: 15px;">c++</a> <a href="/tags/class/" style="font-size: 15px;">class</a> <a href="/tags/OOP/" style="font-size: 15px;">OOP</a> <a href="/tags/struct/" style="font-size: 15px;">struct</a> <a href="/tags/基础/" style="font-size: 15px;">基础</a> <a href="/tags/whois/" style="font-size: 15px;">whois</a> <a href="/tags/纳网/" style="font-size: 15px;">纳网</a> <a href="/tags/网络营销/" style="font-size: 15px;">网络营销</a> <a href="/tags/隐私/" style="font-size: 15px;">隐私</a> <a href="/tags/骗子/" style="font-size: 15px;">骗子</a> <a href="/tags/怀柔/" style="font-size: 15px;">怀柔</a> <a href="/tags/水长城/" style="font-size: 15px;">水长城</a> <a href="/tags/清明/" style="font-size: 15px;">清明</a> <a href="/tags/游记/" style="font-size: 15px;">游记</a> <a href="/tags/cpp/" style="font-size: 15px;">cpp</a> <a href="/tags/RVO/" style="font-size: 15px;">RVO</a> <a href="/tags/拷贝构造函数/" style="font-size: 15px;">拷贝构造函数</a> <a href="/tags/返回值优化/" style="font-size: 15px;">返回值优化</a> <a href="/tags/bug/" style="font-size: 15px;">bug</a> <a href="/tags/FPU/" style="font-size: 15px;">FPU</a> <a href="/tags/x64/" style="font-size: 15px;">x64</a> <a href="/tags/x86/" style="font-size: 15px;">x86</a> <a href="/tags/汇编/" style="font-size: 15px;">汇编</a> <a href="/tags/浮点乘法/" style="font-size: 15px;">浮点乘法</a> <a href="/tags/浮点数/" style="font-size: 15px;">浮点数</a> <a href="/tags/误差/" style="font-size: 15px;">误差</a> <a href="/tags/3次握手/" style="font-size: 15px;">3次握手</a> <a href="/tags/TCP-IP/" style="font-size: 15px;">TCP/IP</a> <a href="/tags/tcpdump/" style="font-size: 15px;">tcpdump</a> <a href="/tags/windump/" style="font-size: 15px;">windump</a> <a href="/tags/计算机网络/" style="font-size: 15px;">计算机网络</a> <a href="/tags/php图片水印/" style="font-size: 15px;">php图片水印</a> <a href="/tags/QQ空间/" style="font-size: 15px;">QQ空间</a> <a href="/tags/图片拼接/" style="font-size: 15px;">图片拼接</a> <a href="/tags/魔力日志/" style="font-size: 15px;">魔力日志</a> <a href="/tags/Android-4-2/" style="font-size: 15px;">Android 4.2</a> <a href="/tags/AutoSwitcher/" style="font-size: 15px;">AutoSwitcher</a> <a href="/tags/WRITE-SECURE-SETTINGS/" style="font-size: 15px;">WRITE_SECURE_SETTINGS</a> <a href="/tags/没有权限/" style="font-size: 15px;">没有权限</a> <a href="/tags/sqlite/" style="font-size: 15px;">sqlite</a></div></div><div class="widget"><div class="widget-title">最新文章</div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/blog/jquery-ajax-post-to-download-a-file.html">jQuery Ajax请求下载文件资源</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/travel-to-northwest-of-China.html">毕业旅行之大西北游</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/codecolorer-adapted-to-highlight.html">将代码高亮插件codecolorer替换为highlight</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/binding-domain-to-plugin-of-mobile-theme.html">给手机主题插件Wptouch绑定单独的域名</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/share-beamer-with-tsinghua-theme.html">分享一个清华主题的beamer模版</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/install-vim-latex-suite-in-mac-osx.html">Mac下安装使用vim插件latex-suite</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/travel-to-vietnam.html">越南10日游记</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/summary-of-year-2014.html">2014年终总结</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/android-airplanemode-auto-switcher-v2.html">飞行模式助手</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/leetcode-summary.html">leetcode总结</a></li></ul></div><div class="widget"><div class="widget-title">最近评论</div><script type="text/javascript" src="//hexo-tanglei.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div><div class="widget"><div class="widget-title">友情链接</div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div></div><div id="footer">© <a href="/." rel="nofollow">tanglei's blog|唐磊的个人博客.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/jquery.min.js?v=0.0.0"></script><script type="text/javascript" src="/js/totop.js?v=0.0.0"></script><script type="text/javascript" src="/js/fancybox.pack.js?v=0.0.0"></script><script type="text/javascript" src="/js/jquery.fancybox.js?v=0.0.0"></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>